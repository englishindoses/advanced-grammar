<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Advanced ESL Grammar: Modal Perfect Forms - Learn how to use modal verbs with perfect infinitives to talk about past situations and speculations">
  <title>Modal Perfect Forms: Past Situations - Advanced ESL Grammar</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Light theme (default) */
      --bg-color: #ffffff;
      --text-color: #333333;
      --header-bg: #1B263B;
      --header-text: #ffffff;
      --card-bg: #f8f9fa;
      --border-color: #ddd;
      --accent-color: #3498db;
      --secondary-accent: #f07d3e;
      --link-color: #3498db;
      --success-bg: #d4edda;
      --success-color: #155724;
      --error-bg: #f8d7da;
      --error-color: #721c24;
      --example-bg: #f8f9fa;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --mcq-container-bg: #f0f8ff;
      --mcq-hover-bg: #d0e6f7;
      --mcq-selected-border: #3498db;
      --mcq-selected-bg: #d0e6f7;
      --gap-input-border: #3498db;
      --partial-bg: #fff3cd;
      --partial-color: #856404;
      --partial-border: #ffeeba;
    }

    [data-theme="dark"] {
      /* Dark theme */
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --header-bg: #000000;
      --header-text: #ffffff;
      --card-bg: #1e1e1e;
      --border-color: #444444;
      --accent-color: #4fa3e0;
      --secondary-accent: #f38d56;
      --link-color: #4fa3e0;
      --success-bg: #143823;
      --success-color: #7cda9c;
      --error-bg: #2c1215;
      --error-color: #e7a9ad;
      --example-bg: #2a2a2a;
      --shadow-color: rgba(0, 0, 0, 0.3);
      --mcq-container-bg: #1a2632;
      --mcq-hover-bg: #253545;
      --mcq-selected-border: #4fa3e0;
      --mcq-selected-bg: #253545;
      --gap-input-border: #4fa3e0;
      --partial-bg: #332d15;
      --partial-color: #f0dc9e;
      --partial-border: #665c30;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: var(--bg-color);
      transition: background-color 0.3s ease, color 0.3s ease;
      margin: 0;
      padding: 0;
    }

    h1 {
      background-color: var(--header-bg);
      font-family: 'Montserrat', sans-serif;
      color: var(--header-text);
      padding: 20px;
      padding-left: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
      box-shadow: 0 4px 6px var(--shadow-color);
    }

    h2, h3 {
      color: var(--text-color);
      font-family: 'Montserrat', sans-serif;
    }

    h2 {
      border-bottom: 2px solid var(--accent-color);
      display: inline-block;
      padding-bottom: 5px;
      margin-bottom: 20px;
      margin-top: 30px;
    }

    /* Style for examples */
    .example, span.example, em {
      font-family: 'Source Code Pro', monospace;
      background-color: var(--example-bg);
      padding: 5px;
      border-radius: 3px;
      margin: 0;
      display: inline-block;
    }

    a {
      color: var(--link-color);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Standard section containers */
    .intro-section, .modal-type, .mcq-container {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      border-left: 5px solid var(--accent-color);
      width: 100%;
      box-sizing: border-box;
      max-width: 760px; /* Slightly smaller than container to account for padding */
      margin-left: auto;
      margin-right: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      box-shadow: 0 2px 3px var(--shadow-color);
      border-radius: 5px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid var(--border-color);
      padding: 12px;
      text-align: left;
    }

    th {
      background-color: var(--accent-color);
      color: white;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
    }
    
    tr:nth-child(even) {
      background-color: var(--card-bg);
    }
    
    tr:hover {
      background-color: rgba(52, 152, 219, 0.1);
    }

    hr {
      border: none;
      height: 1px;
      background-color: var(--border-color);
      margin: 25px 0;
    }

    .main-navigation {
      background-color: var(--header-bg);
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      position: relative;
    }

    .site-logo {
      color: var(--header-text);
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 1.2rem;
      text-decoration: none;
      margin-right: 20px;
    }

    .nav-links {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-right: 80px;
    }

    .nav-link {
      color: var(--header-text);
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    .nav-link:hover {
      background-color: rgba(255, 255, 255, 0.1);
      text-decoration: none;
    }

    .nav-link.active {
      background-color: var(--accent-color);
    }

    .nav-toggle {
      display: none;
      background: none;
      border: none;
      color: var(--header-text);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .breadcrumbs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      font-size: 0.9rem;
      flex-wrap: wrap;
    }

    .breadcrumb-item {
      color: #6c757d;
    }

    .breadcrumb-item a {
      color: var(--link-color);
      text-decoration: none;
    }

    .breadcrumb-item a:hover {
      text-decoration: underline;
    }

    .breadcrumb-separator {
      color: #6c757d;
    }

    .bottom-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
      width: 100%;
    }

    .center-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .nav-button {
      background-color: var(--accent-color);
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      text-decoration: none;
      transition: background-color 0.3s, transform 0.2s;
      font-family: 'Open Sans', sans-serif;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .nav-button:hover {
      background-color: #2980b9;
      text-decoration: none;
      transform: translateY(-2px);
    }

    .nav-button.previous {
      margin-right: auto;
    }

    .nav-button.next {
      margin-left: auto;
    }

    .nav-button.activities {
      background-color: var(--secondary-accent);
    }

    .nav-button.activities:hover {
      background-color: #e06d2e;
    }

    /* MCQ Container Styles */
    .mcq-container {
      background-color: var(--mcq-container-bg);
      padding: 20px;
      border-radius: 5px;
      margin: 30px 0;
    }

    /* Individual question blocks */
    .question {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color);
    }

    /* Question text */
    .mcq-question {
      margin-bottom: 20px;
      font-weight: 600;
    }

    /* Container for all options */
    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }

    /* Individual option buttons */
    .option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s;
    }

    /* Hover effect for options */
    .option:hover {
      background-color: var(--mcq-hover-bg);
      transform: translateY(-1px);
    }

    /* Selected state for options */
    .option.selected {
      border: 2px solid var(--mcq-selected-border);
      background-color: var(--mcq-selected-bg);
      font-weight: bold;
    }

    /* Feedback area */
    .feedback {
      margin-top: 15px;
      padding: 10px;
      border-radius: 4px;
      display: none;
    }

    /* Correct answer styling */
    .feedback.correct {
      background-color: var(--success-bg);
      color: var(--success-color);
      border: 1px solid var(--success-bg);
    }

    /* Incorrect answer styling */
    .feedback.incorrect {
      background-color: var(--error-bg);
      color: var(--error-color);
      border: 1px solid var(--error-bg);
    }

    /* Score display */
    .score-display {
      font-size: 1.2em;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
      padding: 15px;
      background-color: var(--card-bg);
      border-radius: 5px;
      display: none;
    }

    /* Restart button */
    .restart-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 15px;
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s, transform 0.2s;
    }

    .restart-btn:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    /* For block-level examples (full sentences and lists) */
    div.example {
      font-family: 'Source Code Pro', monospace;
      background-color: var(--example-bg);
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 15px;
      display: block;
    }

    /* When example contains a list, add extra left padding for bullets */
    .example ul, .example ol {
      padding-left: 20px;
    }

    /* Print button */
    .print-button {
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 10px 15px;
      cursor: pointer;
      font-family: 'Open Sans', sans-serif;
      transition: background-color 0.3s, transform 0.2s;
    }

    .print-button:hover {
      background-color: #2980b9;
    }

    /* Skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--accent-color);
      color: white;
      padding: 8px;
      z-index: 100;
      transition: top 0.3s;
    }

    .skip-link:focus {
      top: 0;
    }

    /* Theme toggle button */
    .theme-toggle-container {
      position: absolute;
      top: 15px;
      right: 80px;
      z-index: 100;
    }

    .theme-toggle {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      transition: background-color 0.3s;
    }

    .theme-toggle:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .light-icon, .dark-icon {
      position: absolute;
      transition: opacity 0.3s, transform 0.3s;
    }

    .light-icon {
      opacity: 0;
      transform: rotate(90deg);
    }

    .dark-icon {
      opacity: 1;
      transform: rotate(0);
    }

    [data-theme="dark"] .light-icon {
      opacity: 1;
      transform: rotate(0);
    }

    [data-theme="dark"] .dark-icon {
      opacity: 0;
      transform: rotate(-90deg);
    }

    /* Note for native speaker informal usage - with speech bubble icon */
    .note {
      background-color: rgba(240, 240, 240, 0.6);
      padding: 15px 15px 15px 40px;
      border-radius: 4px;
      margin: 10px 0;
      font-size: 0.9em;
      position: relative;
    }

    .note:before {
      content: "💬";
      position: absolute;
      left: 12px;
      top: 12px;
      font-size: 1.2em;
    }

    [data-theme="dark"] .note {
      background-color: rgba(60, 60, 60, 0.6);
    }

    /* Updated Common Errors section */
    .error-title {
      margin-bottom: 5px;
    }

    .incorrect {
      color: var(--error-color);
      margin: 5px 0;
    }

    .correct {
      color: var(--success-color);
      font-weight: bold;
      margin: 5px 0;
    }

    .explanation {
      font-style: italic;
      margin-top: 5px;
      margin-bottom: 15px;
    }

    /* Grammar Tips styling */
    .grammar-tip {
      background-color: var(--example-bg);
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
      margin-bottom: 10px;
      border-left: 3px solid var(--secondary-accent);
    }

    /* Make sure grammar tips heading is orange */
    .tips-heading {
      border-bottom: 2px solid var(--secondary-accent);
    }

    /* Production practice styling - match conditional-type */
    .sentence-builder {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .hints {
      background-color: var(--example-bg);
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
    }

    .practice-input {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 10px 0;
      resize: vertical;
    }

    .check-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 15px;
      cursor: pointer;
      font-family: 'Open Sans', sans-serif;
      transition: background-color 0.3s, transform 0.2s;
    }

    .check-btn:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    .practice-feedback {
      margin-top: 10px;
      font-style: italic;
    }

    /* Making sure the example sentences with brackets stand out */
    .example ol li {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    /* Override any specific width settings and make sure ALL containers match */
    section, div.container, .modal-type, .intro-section, 
    .mcq-container, .gap-fill-container, .dialog, .error-pattern, 
    .correct-pattern, .activity-controls, .result-display {
      max-width: 760px !important;
      box-sizing: border-box !important;
      margin-left: auto !important;
      margin-right: auto !important;
    }
    
    /* The container around everything needs to be just a bit wider */
    div.container {
      max-width: 800px !important;
    }

    footer {
      font-style: italic;
      color: var(--text-color);
      opacity: 0.8;
      margin-top: 30px;
      padding-top: 15px;
      border-top: 1px solid var(--border-color);
      text-align: center;
      max-width: 760px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .nav-toggle {
        display: block;
      }
      
      .nav-links {
        display: none;
        width: 100%;
        flex-direction: column;
      }
      
      .nav-links.show {
        display: flex;
      }
      
      .bottom-navigation {
        flex-direction: column;
        gap: 10px;
      }
      
      .center-buttons {
        display: flex;
        width: 100%;
        gap: 10px;
      }
      
      .nav-button, .print-button {
        width: 100%;
        text-align: center;
        justify-content: center;
      }
      
      html {
        font-size: 15px;
      }
      
      h1 {
        font-size: 1.8rem;
        padding: 15px;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      .container {
        padding: 0 15px;
      }
    }

    @media print {
      .main-navigation, .theme-toggle-container, .bottom-navigation, .print-button {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to content</a>

  <div class="theme-toggle-container">
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
      <span class="light-icon">☀️</span>
      <span class="dark-icon">🌙</span>
    </button>
  </div>

  <nav class="main-navigation">
    <a href="index.html" class="site-logo">ESL Grammar</a>
    
    <button class="nav-toggle" aria-label="Toggle navigation">☰</button>
    
    <div class="nav-links">
      <a href="index.html" class="nav-link">Home</a>
      <a href="extra-practice.html" class="nav-link">Extra Practice</a>
    </div>
  </nav>

  <div class="container">
    <div class="breadcrumbs" aria-label="breadcrumb">
      <span class="breadcrumb-item"><a href="index.html">Home</a></span>
      <span class="breadcrumb-separator">›</span>
      <span class="breadcrumb-item"><a href="grammar.html">Grammar</a></span>
      <span class="breadcrumb-separator">›</span>
      <span class="breadcrumb-item">Modal Perfect Forms: Past Situations</span>
    </div>

    <main id="main-content">
      <h1>Modal Perfect Forms: Past Situations</h1>

      <!-- INTRODUCTION SECTION -->
      <section class="intro-section">
        <h2>Introduction</h2>
        <p>Modal perfect forms combine modal verbs (must, could, should, etc.) with perfect infinitives (have + past participle) to talk about past situations. These forms allow you to express certainty, possibility, obligation, or criticism about things that happened—or didn't happen—in the past.</p>
        
        <p>These structures are essential for professional and academic English, allowing you to discuss past events with nuance when you need to express judgment, speculation, or reflection.</p>
        
        <h3>After this lesson, you will be able to:</h3>
        <ul>
          <li>Express different degrees of certainty about past events.</li>
          <li>Talk about past obligations and criticise past actions.</li>
          <li>Discuss past possibilities and missed opportunities.</li>
          <li>Use modal perfect forms correctly in both speaking and writing.</li>
        </ul>
      </section>

      <!-- GRAMMAR POINT SECTION 1 -->
      <section class="modal-type">
        <h2>Modal Perfect Forms for Past Deduction</h2>
        
        <p><h3>Must have + past participle</h3>Used to express strong certainty about past events based on evidence or logic.</p>
        
        <p><strong>Structure</strong>: Subject + must have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>She <strong>must have finished</strong> the report already. I can see it on her desk. (I'm quite certain she completed it)</li>
            <li>They <strong>must have arrived</strong> home safely. They just sent me a message. (I'm confident they arrived home)</li>
            <li>The package <strong>must have been delivered</strong> yesterday. It's not at the post office anymore. (I'm logically deducing it was delivered)</li>
          </ol>
        </div>
        
        <p><h3>Can't/couldn't have + past participle:</h3>  Used to express strong certainty that something did NOT happen in the past.</p>
        
        <p><strong>Structure</strong>: Subject + can't/couldn't have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>He <strong>can't have forgotten</strong> the meeting. I reminded him this morning. (I'm sure he didn't forget)</li>
            <li>They <strong>couldn't have missed</strong> the email. I sent it to everyone. (I'm certain they received it)</li>
            <li>The document <strong>can't have been deleted</strong> accidentally. It requires confirmation. (I'm confident it wasn't deleted by mistake)</li>
          </ol>
        </div>
        
        <p><h3>May/might/could have + past participle:</h3> Used to express possibility about past events when you aren't certain.</p>
        
        <p><strong>Structure</strong>: Subject + may/might/could have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>She <strong>might have taken</strong> the wrong train. That's why she's late. (It's possible she took the wrong train)</li>
            <li>The manager <strong>may have forgotten</strong> to sign the contract. (Perhaps the manager forgot)</li>
            <li>The email <strong>could have gone</strong> to your spam folder. (It's possible the email is in spam)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong>Native speaker note:</strong> In casual speech, native speakers often use "must've," "couldn't've," and "might've" as contractions. Also, "could have" is sometimes used interchangeably with "might have," though "could have" can sometimes suggest a slightly lower probability.</p>
        </div>
      </section>

      <!-- GRAMMAR POINT SECTION 2 -->
      <section class="modal-type">
        <h2>Modal Perfect Forms for Criticism and Regret</h2>
        
        <p><h3>Should have + past participle:</h3> Used to express criticism, regret, or missed obligations about past actions.</p>
        
        <p><strong>Structure</strong>: Subject + should have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>You <strong>should have called</strong> me before making the decision. (Criticism: you didn't call, and that was wrong)</li>
            <li>I <strong>should have studied</strong> harder for the exam. (Regret: I didn't study enough)</li>
            <li>They <strong>should have completed</strong> the project by Friday. (Unfulfilled obligation: they didn't complete it)</li>
          </ol>
        </div>
        
        <p><h3>Shouldn't have + past participle:</h3> Used to criticise past actions that occurred but were wrong or inadvisable.</p>
        
        <p><strong>Structure</strong>: Subject + shouldn't have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>You <strong>shouldn't have sent</strong> the email without checking it first. (Criticism: you sent it, but that was wrong)</li>
            <li>She <strong>shouldn't have told</strong> everyone about the surprise party. (Criticism: she told everyone, which was a mistake)</li>
            <li>They <strong>shouldn't have invested</strong> all their money in one company. (Criticism: they made a poor investment decision)</li>
          </ol>
        </div>
        
        <p><h3>Could have + past participle:</h3> Used to express missed opportunities or unrealised potential in the past.</p>
        
        <p><strong>Structure</strong>: Subject + could have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>We <strong>could have finished</strong> the project earlier if everyone had helped. (Unrealised potential: we didn't finish early)</li>
            <li>She <strong>could have won</strong> the competition with more practice. (Missed opportunity: she didn't win)</li>
            <li>They <strong>could have saved</strong> money by booking in advance. (Missed opportunity: they didn't save money)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong>Native speaker note:</strong> "Should've" and "shouldn't've" are common contractions in speech. "Could've" is often used when expressing disappointment or regret about missed opportunities. The phrase "could've, would've, should've" is a common expression meaning "it's too late to think about what might have happened."</p>
        </div>
      </section>

      <!-- GRAMMAR POINT SECTION 3 -->
      <section class="modal-type">
        <h2>Modal Perfect Forms for Hypothetical Past</h2>
        
        <p><h3>Would have + past participle:</h3> Used to express hypothetical or unreal past situations, often in conditional sentences.</p>
        
        <p><strong>Structure</strong>: Subject + would have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>I <strong>would have attended</strong> the conference if I had known about it. (But I didn't know, so I didn't attend)</li>
            <li>She <strong>would have helped</strong> you if you had asked. (But you didn't ask, so she didn't help)</li>
            <li>The company <strong>would have hired</strong> you if your interview had gone better. (But it didn't go well, so they didn't hire you)</li>
          </ol>
        </div>
        
        <p><h3>Wouldn't have + past participle:</h3> Used to express hypothetical negatives about the past.</p>
        
        <p><strong>Structure</strong>: Subject + wouldn't have + past participle + rest of sentence</p>
        
        <div class="example">
          <ol>
            <li>He <strong>wouldn't have made</strong> that mistake if he had been more careful. (But he wasn't careful, so he made the mistake)</li>
            <li>We <strong>wouldn't have missed</strong> the train if we had left earlier. (But we didn't leave early, so we missed it)</li>
            <li>The project <strong>wouldn't have failed</strong> if they had planned it better. (But they didn't plan well, so it failed)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong>Native speaker note:</strong> "Would've" and "wouldn't've" are common contractions in speech. Modal perfect forms are often used in "if only" sentences to express regret, like "If only I had known, I would have helped you."</p>
        </div>
      </section>

      <!-- VISUAL COMPARISON TABLE - No container, direct in the flow -->
      <h2>Summary of Modal Perfect Forms</h2>
      <table>
        <thead>
          <tr>
            <th>Modal Perfect Form</th>
            <th>Meaning</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>must have + past participle</td>
            <td>Strong certainty about past events</td>
            <td><span class="example">She <strong>must have left</strong> already.</span></td>
          </tr>
          <tr>
            <td>can't/couldn't have + past participle</td>
            <td>Strong certainty that something did NOT happen</td>
            <td><span class="example">He <strong>can't have finished</strong> yet.</span></td>
          </tr>
          <tr>
            <td>may/might have + past participle</td>
            <td>Possibility about past events</td>
            <td><span class="example">They <strong>might have forgotten</strong>.</span></td>
          </tr>
          <tr>
            <td>could have + past participle</td>
            <td>1. Possibility about past events<br>2. Missed opportunity</td>
            <td><span class="example">It <strong>could have rained</strong> last night.<br>You <strong>could have told</strong> me earlier.</span></td>
          </tr>
          <tr>
            <td>should have + past participle</td>
            <td>Criticism or regret about past actions</td>
            <td><span class="example">You <strong>should have called</strong>.</span></td>
          </tr>
          <tr>
            <td>shouldn't have + past participle</td>
            <td>Criticism about wrong actions taken</td>
            <td><span class="example">You <strong>shouldn't have lied</strong>.</span></td>
          </tr>
          <tr>
            <td>would have + past participle</td>
            <td>Hypothetical past situation (often in conditionals)</td>
            <td><span class="example">I <strong>would have helped</strong> if I'd known.</span></td>
          </tr>
        </tbody>
      </table>

      <!-- COMMON ERRORS SECTION -->
      <section class="modal-type">
        <h2>Common Errors</h2>
        
        <div class="error-pattern">
          <p class="error-title"><strong>1: Using simple past instead of modal perfect</strong></p>
          <p class="incorrect">She must arrived early because her coat is here.</p>
          <p class="correct">She <strong>must have arrived</strong> early because her coat is here. ✓</p>
          <p class="explanation"><em>Always use 'have + past participle' after modal verbs when talking about the past. The modal verb itself doesn't change to past tense.</em></p>
        </div>
        
        <div class="error-pattern">
          <p class="error-title"><strong>2: Using 'of' instead of 'have' in spoken contractions</strong></p>
          <p class="incorrect">He should of called earlier.</p>
          <p class="correct">He <strong>should have</strong> called earlier. ✓</p>
          <p class="explanation"><em>The contraction 'should've' sounds like 'should of', but the correct form is always 'should have'.</em></p>
        </div>
        
        <div class="error-pattern">
          <p class="error-title"><strong>3: Confusing levels of certainty</strong></p>
          <p class="incorrect">The parcel must have arrived, but I'm not sure.</p>
          <p class="correct">The parcel <strong>might have arrived</strong>, but I'm not sure. ✓</p>
          <p class="explanation"><em>'Must have' expresses strong certainty, so it doesn't make sense with 'not sure'. Use 'might have' or 'could have' for uncertainty.</em></p>
        </div>
      </section>

      <!-- TIPS SECTION - No container, direct in the flow with orange underlined heading -->
      <h2 style="border-bottom: 2px solid var(--secondary-accent);">Useful Tips</h2>
      
      <div class="grammar-tip">
        <p>📝 <strong>TIP 1:</strong> Think of the degree of certainty as a scale: must have (very certain) → could/might/may have (possible) → can't have (very certain it didn't happen).</p>
      </div>
      
      <div class="grammar-tip">
        <p>📝 <strong>TIP 2:</strong> Remember that modal perfect forms always talk about the past, even though they use present tense modals (must, can't, etc.) + have + past participle.</p>
      </div>
      
      <div class="grammar-tip">
        <p>📝 <strong>TIP 3:</strong> If you're expressing regret or criticism, 'should have' is usually your best choice. If you're talking about missed opportunities, use 'could have'.</p>
      </div>

      <!-- QUIZ SECTION -->
      <section class="mcq-container">
        <h2>Test Your Knowledge</h2>
        <p>Test your understanding of modal perfect forms by selecting the correct option for each question.</p>
        
        <!-- Question 1 (Easiest) -->
        <div class="question" id="q1">
          <p class="mcq-question">1. I can't find my keys. I _____ them at the office.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q1', 0)">
              <span>A. must left</span>
            </div>
            <div class="option" onclick="selectOption('q1', 1)">
              <span>B. must have left</span>
            </div>
            <div class="option" onclick="selectOption('q1', 2)">
              <span>C. must had left</span>
            </div>
            <div class="option" onclick="selectOption('q1', 3)">
              <span>D. must to have left</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q1-0">
            Incorrect. We need 'have + past participle' after modal verbs to form the perfect.
          </div>
          <div class="feedback" id="feedback-q1-1">
            Correct! 'Must have left' is the correct modal perfect form expressing certainty about a past action.
          </div>
          <div class="feedback" id="feedback-q1-2">
            Incorrect. We use 'have' not 'had' when forming modal perfect structures.
          </div>
          <div class="feedback" id="feedback-q1-3">
            Incorrect. Modal verbs don't need 'to' before 'have'.
          </div>
        </div>
        
        <!-- Question 2 -->
        <div class="question" id="q2">
          <p class="mcq-question">2. You _____ to the dentist when your tooth started hurting.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q2', 0)">
              <span>A. should go</span>
            </div>
            <div class="option" onclick="selectOption('q2', 1)">
              <span>B. should went</span>
            </div>
            <div class="option" onclick="selectOption('q2', 2)">
              <span>C. should have gone</span>
            </div>
            <div class="option" onclick="selectOption('q2', 3)">
              <span>D. should to go</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q2-0">
            Incorrect. 'Should go' refers to the present or future, not the past.
          </div>
          <div class="feedback" id="feedback-q2-1">
            Incorrect. We can't use the past tense directly after a modal verb.
          </div>
          <div class="feedback" id="feedback-q2-2">
            Correct! 'Should have gone' expresses a criticism about a past action that didn't happen.
          </div>
          <div class="feedback" id="feedback-q2-3">
            Incorrect. Modal verbs don't use 'to' before the main verb.
          </div>
        </div>
        
        <!-- Question 3 -->
        <div class="question" id="q3">
          <p class="mcq-question">3. She _____ my message yet. I only sent it five minutes ago.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q3', 0)">
              <span>A. can't have received</span>
            </div>
            <div class="option" onclick="selectOption('q3', 1)">
              <span>B. wouldn't have received</span>
            </div>
            <div class="option" onclick="selectOption('q3', 2)">
              <span>C. shouldn't have received</span>
            </div>
            <div class="option" onclick="selectOption('q3', 3)">
              <span>D. mustn't have received</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q3-0">
            Correct! 'Can't have received' expresses certainty that something did not happen in the past.
          </div>
          <div class="feedback" id="feedback-q3-1">
            Incorrect. 'Wouldn't have received' is used for hypothetical situations, not logical deductions.
          </div>
          <div class="feedback" id="feedback-q3-2">
            Incorrect. 'Shouldn't have received' suggests she received it but shouldn't have, which isn't the case here.
          </div>
          <div class="feedback" id="feedback-q3-3">
            Incorrect. 'Mustn't have received' is not standard English for this context; we use 'can't have' for negative deductions.
          </div>
        </div>
        
        <!-- Question 4 -->
        <div class="question" id="q4">
          <p class="mcq-question">4. We're lost. We _____ the wrong turning at the last junction.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q4', 0)">
              <span>A. could take</span>
            </div>
            <div class="option" onclick="selectOption('q4', 1)">
              <span>B. might took</span>
            </div>
            <div class="option" onclick="selectOption('q4', 2)">
              <span>C. can have taken</span>
            </div>
            <div class="option" onclick="selectOption('q4', 3)">
              <span>D. might have taken</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q4-0">
            Incorrect. 'Could take' refers to present or future possibility, not past.
          </div>
          <div class="feedback" id="feedback-q4-1">
            Incorrect. We can't use past tense directly after a modal verb.
          </div>
          <div class="feedback" id="feedback-q4-2">
            Incorrect. 'Can have taken' is not used in standard English for past possibility.
          </div>
          <div class="feedback" id="feedback-q4-3">
            Correct! 'Might have taken' expresses a possible explanation for a past event.
          </div>
        </div>
        
        <!-- Question 5 -->
        <div class="question" id="q5">
          <p class="mcq-question">5. I _____ to that party if I hadn't been so tired last night.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q5', 0)">
              <span>A. will go</span>
            </div>
            <div class="option" onclick="selectOption('q5', 1)">
              <span>B. would have gone</span>
            </div>
            <div class="option" onclick="selectOption('q5', 2)">
              <span>C. should go</span>
            </div>
            <div class="option" onclick="selectOption('q5', 3)">
              <span>D. could go</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q5-0">
            Incorrect. 'Will go' is used for future, not hypothetical past.
          </div>
          <div class="feedback" id="feedback-q5-1">
            Correct! 'Would have gone' is used in third conditionals to talk about hypothetical past situations.
          </div>
          <div class="feedback" id="feedback-q5-2">
            Incorrect. 'Should go' refers to present advice, not hypothetical past.
          </div>
          <div class="feedback" id="feedback-q5-3">
            Incorrect. 'Could go' refers to present possibility, not hypothetical past.
          </div>
        </div>
        
        <!-- Question 6 -->
        <div class="question" id="q6">
          <p class="mcq-question">6. You _____ the door when you left the office. It's a security risk.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q6', 0)">
              <span>A. should lock</span>
            </div>
            <div class="option" onclick="selectOption('q6', 1)">
              <span>B. should have lock</span>
            </div>
            <div class="option" onclick="selectOption('q6', 2)">
              <span>C. shouldn't have locked</span>
            </div>
            <div class="option" onclick="selectOption('q6', 3)">
              <span>D. shouldn't have left unlocked</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q6-0">
            Incorrect. 'Should lock' refers to present/future advice, not past criticism.
          </div>
          <div class="feedback" id="feedback-q6-1">
            Incorrect. We need the past participle 'locked' not the base form 'lock'.
          </div>
          <div class="feedback" id="feedback-q6-2">
            Incorrect. This suggests they locked the door but shouldn't have, which is the opposite of what's intended.
          </div>
          <div class="feedback" id="feedback-q6-3">
            Correct! This expresses criticism about leaving the door unlocked in the past.
          </div>
        </div>
        
        <!-- Question 7 -->
        <div class="question" id="q7">
          <p class="mcq-question">7. That package _____ days ago. I sent it by express delivery.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q7', 0)">
              <span>A. must have arrived</span>
            </div>
            <div class="option" onclick="selectOption('q7', 1)">
              <span>B. must arrived</span>
            </div>
            <div class="option" onclick="selectOption('q7', 2)">
              <span>C. may arrive</span>
            </div>
            <div class="option" onclick="selectOption('q7', 3)">
              <span>D. could arriving</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q7-0">
            Correct! 'Must have arrived' expresses strong certainty about a past event based on the evidence.
          </div>
          <div class="feedback" id="feedback-q7-1">
            Incorrect. We need 'have + past participle' after 'must' when referring to the past.
          </div>
          <div class="feedback" id="feedback-q7-2">
            Incorrect. 'May arrive' refers to future possibility, not past.
          </div>
          <div class="feedback" id="feedback-q7-3">
            Incorrect. This form is grammatically incorrect; we need 'have + past participle'.
          </div>
        </div>
        
        <!-- Question 8 -->
        <div class="question" id="q8">
          <p class="mcq-question">8. You _____ more carefully. That's how the accident happened.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q8', 0)">
              <span>A. should drive</span>
            </div>
            <div class="option" onclick="selectOption('q8', 1)">
              <span>B. should have driven</span>
            </div>
            <div class="option" onclick="selectOption('q8', 2)">
              <span>C. must drive</span>
            </div>
            <div class="option" onclick="selectOption('q8', 3)">
              <span>D. could driven</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q8-0">
            Incorrect. 'Should drive' refers to present/future advice, not past criticism.
          </div>
          <div class="feedback" id="feedback-q8-1">
            Correct! 'Should have driven' expresses criticism about a past action.
          </div>
          <div class="feedback" id="feedback-q8-2">
            Incorrect. 'Must drive' expresses present obligation, not past criticism.
          </div>
          <div class="feedback" id="feedback-q8-3">
            Incorrect. This is grammatically incorrect; we need 'have' between 'could' and 'driven'.
          </div>
        </div>
        
        <!-- Question 9 -->
        <div class="question" id="q9">
          <p class="mcq-question">9. She _____ my email yet, or she would have replied.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q9', 0)">
              <span>A. must not have seen</span>
            </div>
            <div class="option" onclick="selectOption('q9', 1)">
              <span>B. mustn't see</span>
            </div>
            <div class="option" onclick="selectOption('q9', 2)">
              <span>C. needn't have seen</span>
            </div>
            <div class="option" onclick="selectOption('q9', 3)">
              <span>D. can't have seen</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q9-0">
            Incorrect. 'Must not have' is less common in English; we typically use 'can't have' for negative deductions.
          </div>
          <div class="feedback" id="feedback-q9-1">
            Incorrect. 'Mustn't see' expresses prohibition, not a deduction about the past.
          </div>
          <div class="feedback" id="feedback-q9-2">
            Incorrect. 'Needn't have seen' would suggest the action happened but was unnecessary.
          </div>
          <div class="feedback" id="feedback-q9-3">
            Correct! 'Can't have seen' expresses certainty that something did not happen in the past.
          </div>
        </div>
        
        <!-- Question 10 (Most challenging) -->
        <div class="question" id="q10">
          <p class="mcq-question">10. It's strange that she hasn't called. She _____ our message, but perhaps she's just busy.</p>
          <div class="options">
            <div class="option" onclick="selectOption('q10', 0)">
              <span>A. must have received</span>
            </div>
            <div class="option" onclick="selectOption('q10', 1)">
              <span>B. can't have received</span>
            </div>
            <div class="option" onclick="selectOption('q10', 2)">
              <span>C. might have received</span>
            </div>
            <div class="option" onclick="selectOption('q10', 3)">
              <span>D. would receive</span>
            </div>
          </div>
          <div class="feedback" id="feedback-q10-0">
            Incorrect. 'Must have received' expresses certainty, which contradicts "but perhaps she's just busy."
          </div>
          <div class="feedback" id="feedback-q10-1">
            Incorrect. 'Can't have received' expresses certainty that she didn't receive it, which contradicts the idea that she might be busy.
          </div>
          <div class="feedback" id="feedback-q10-2">
            Correct! 'Might have received' expresses possibility, which fits with the uncertainty in the sentence.
          </div>
          <div class="feedback" id="feedback-q10-3">
            Incorrect. 'Would receive' is not used for past possibility.
          </div>
        </div>
        
        <div class="score-display" id="score-display">
          Your score: <span id="score">0</span>/10
        </div>
        
        <button class="restart-btn" id="restart-btn" style="display:none;">Try Again</button>
      </section>
      
      <!-- PRACTICE SECTION -->
      <section class="modal-type">
        <h2>Sentence Building Practice</h2>
        <p>Create your own sentences using the modal perfect forms you've learned.</p>
        
        <div class="sentence-builder">
          <h3>Practice 1: Past Deduction</h3>
          <p>Write a sentence using 'must have', 'can't have', or 'might have' to make a deduction about something that happened in the past.</p>
          <div class="hints">
            <p><strong>Useful words:</strong> forgotten, missed, arrived, left, lost, broken, misunderstood</p>
            <p><strong>Example:</strong> <span class="example">She must have forgotten about our appointment because she didn't show up.</span></p>
          </div>
          <textarea class="practice-input" rows="2" placeholder="Write your sentence here..."></textarea>
          <button class="check-btn">Check</button>
          <div class="practice-feedback"></div>
        </div>
        
        <div class="sentence-builder">
          <h3>Practice 2: Criticism and Regret</h3>
          <p>Write a sentence using 'should have' or 'shouldn't have' to express criticism or regret about a past action.</p>
          <div class="hints">
            <p><strong>Useful words:</strong> told, asked, studied, waited, prepared, checked, listened</p>
            <p><strong>Example:</strong> <span class="example">I should have checked the train times before leaving home.</span></p>
          </div>
          <textarea class="practice-input" rows="2" placeholder="Write your sentence here..."></textarea>
          <button class="check-btn">Check</button>
          <div class="practice-feedback"></div>
        </div>

        <div class="sentence-builder">
          <h3>Practice 3: Missed Opportunities</h3>
          <p>Write a sentence using 'could have' to talk about a missed opportunity in the past.</p>
          <div class="hints">
            <p><strong>Useful words:</strong> helped, visited, learned, saved, joined, applied, taken</p>
            <p><strong>Example:</strong> <span class="example">We could have saved a lot of money if we had booked our flights earlier.</span></p>
          </div>
          <textarea class="practice-input" rows="2" placeholder="Write your sentence here..."></textarea>
          <button class="check-btn">Check</button>
          <div class="practice-feedback"></div>
        </div>
      </section>
    </main>
  </div>
  
  <!-- BOTTOM NAVIGATION -->
  <nav class="bottom-navigation">
    <a href="modal-differences.html" class="nav-button previous">← Previous: Modal Verbs Differences</a>
    <div class="center-buttons">
      <button class="nav-button print-button" onclick="window.print()">Print This Page</button>
      <a href="modal-perfect-practice.html" class="nav-button activities">Extra Activities</a>
    </div>
    <a href="modal-progressive.html" class="nav-button next">Next: Modal Progressive Forms →</a>
  </nav>

  <!-- Footer with copyright notice -->
  <footer>
    <p>© 2025 English in Doses | All rights reserved | <a href="license.html">Licensing Information</a></p>
  </footer>

  <!-- JavaScript for interactive elements -->
  <script>
    // Theme toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const themeToggle = document.getElementById('theme-toggle');
      
      // Handle theme toggle click
      themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        document.documentElement.setAttribute('data-theme', newTheme);
      });
      
      // Mobile navigation toggle
      const navToggle = document.querySelector('.nav-toggle');
      const navLinks = document.querySelector('.nav-links');
      
      if (navToggle) {
        navToggle.addEventListener('click', function() {
          navLinks.classList.toggle('show');
        });
      }
    });
    
    // Quiz functionality
    let score = 0;
    const totalQuestions = 10;
    const correctAnswers = {
      'q1': 1, // must have left
      'q2': 2, // should have gone
      'q3': 0, // can't have received
      'q4': 3, // might have taken
      'q5': 1, // would have gone
      'q6': 3, // shouldn't have left unlocked
      'q7': 0, // must have arrived
      'q8': 1, // should have driven
      'q9': 3, // can't have seen
      'q10': 2 // might have received
    };
    const answered = {
      'q1': false,
      'q2': false,
      'q3': false,
      'q4': false,
      'q5': false,
      'q6': false,
      'q7': false,
      'q8': false,
      'q9': false,
      'q10': false
    };
    
    function selectOption(questionId, optionIndex) {
      // If already answered correctly, don't allow changes
      if (answered[questionId]) return;
      
      const question = document.getElementById(questionId);
      const options = question.getElementsByClassName('option');
      
      // Hide all previous feedback for this question
      const allFeedbacks = question.getElementsByClassName('feedback');
      for (let i = 0; i < allFeedbacks.length; i++) {
        allFeedbacks[i].style.display = 'none';
        allFeedbacks[i].classList.remove('correct', 'incorrect');
      }
      
      // Clear previous selections
      for (let i = 0; i < options.length; i++) {
        options[i].classList.remove('selected');
      }
      
      // Select the current option
      options[optionIndex].classList.add('selected');
      
      // Show feedback for current selection
      const feedbackId = `feedback-${questionId}-${optionIndex}`;
      const feedback = document.getElementById(feedbackId);
      
      if (feedback) {
        feedback.style.display = 'block';
        
        if (optionIndex === correctAnswers[questionId]) {
          feedback.classList.add('correct');
          // Only mark as answered and add to score if correct
          answered[questionId] = true;
          score++;
          // Check if all questions are answered correctly
          checkCompletion();
        } else {
          feedback.classList.add('incorrect');
          // Don't mark as answered so student can try again
        }
      }
    }
    
    function checkCompletion() {
      let allAnswered = true;
      for (const q in answered) {
        if (!answered[q]) {
          allAnswered = false;
          break;
        }
      }
      
      if (allAnswered) {
        // Show the score
        const scoreDisplay = document.getElementById('score-display');
        scoreDisplay.style.display = 'block';
        document.getElementById('score').textContent = score;
        
        // Show the restart button
        document.getElementById('restart-btn').style.display = 'block';
      }
    }
    
    // Restart quiz
    document.getElementById('restart-btn').addEventListener('click', function() {
      // Reset score
      score = 0;
      
      // Reset answered status
      for (const q in answered) {
        answered[q] = false;
      }
      
      // Hide all feedback
      const feedbacks = document.getElementsByClassName('feedback');
      for (let i = 0; i < feedbacks.length; i++) {
        feedbacks[i].style.display = 'none';
        feedbacks[i].classList.remove('correct', 'incorrect');
      }
      
      // Remove selected class
      const options = document.getElementsByClassName('option');
      for (let i = 0; i < options.length; i++) {
        options[i].classList.remove('selected');
      }
      
      // Hide score and restart button
      document.getElementById('score-display').style.display = 'none';
      document.getElementById('restart-btn').style.display = 'none';
      
      // Scroll back to top of quiz
      document.querySelector('.mcq-container').scrollIntoView({behavior: 'smooth'});
    });
    
    // Sentence building practice
    document.addEventListener('DOMContentLoaded', function() {
      const checkButtons = document.querySelectorAll('.check-btn');
      
      checkButtons.forEach(button => {
        button.addEventListener('click', function() {
          const sentenceBuilder = this.closest('.sentence-builder');
          const input = sentenceBuilder.querySelector('.practice-input');
          const feedback = sentenceBuilder.querySelector('.practice-feedback');
          
          // Simple check to see if input is not empty
          if (input.value.trim() === '') {
            feedback.textContent = 'Please write a sentence.';
            feedback.style.color = 'var(--error-color)';
            return;
          }
          
          // In a real implementation, you would have more sophisticated checking
          // For this template, we'll just provide encouraging feedback
          feedback.textContent = 'Great job! Keep practicing to improve your grammar skills.';
          feedback.style.color = 'var(--success-color)';
        });
      });
    });
  </script>
</body>
</html>
